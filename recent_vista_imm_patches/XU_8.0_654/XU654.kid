KIDS Distribution saved on Apr 07, 2015@10:54:12
XU*8*654
**KIDS**:XU*8.0*654^

**INSTALL NAME**
XU*8.0*654
"BLD",1533,0)
XU*8.0*654^KERNEL^0^3150407^y
"BLD",1533,1,0)
^^2^2^3150109^
"BLD",1533,1,1,0)
Kernel patch XU*8*654. This patch supports MFS. Please refer to the
"BLD",1533,1,2,0)
description in Forum Patch Module for details.
"BLD",1533,4,0)
^9.64PA^4.005^1
"BLD",1533,4,4.005,0)
4.005
"BLD",1533,4,4.005,2,0)
^9.641^4.0051^1
"BLD",1533,4,4.005,2,4.0051,0)
FILE/SUBFILE NUMBER  (sub-file)
"BLD",1533,4,4.005,2,4.0051,1,0)
^9.6411^^
"BLD",1533,4,4.005,222)
y^n^p^^^^n^^n
"BLD",1533,4,4.005,224)

"BLD",1533,4,"APDD",4.005,4.0051)

"BLD",1533,4,"B",4.005,4.005)

"BLD",1533,6.3)
29
"BLD",1533,"INID")
^y
"BLD",1533,"INIT")
POST^XUMF654P
"BLD",1533,"KRN",0)
^9.67PA^9002226^22
"BLD",1533,"KRN",.4,0)
.4
"BLD",1533,"KRN",.401,0)
.401
"BLD",1533,"KRN",.402,0)
.402
"BLD",1533,"KRN",.403,0)
.403
"BLD",1533,"KRN",.5,0)
.5
"BLD",1533,"KRN",.84,0)
.84
"BLD",1533,"KRN",3.6,0)
3.6
"BLD",1533,"KRN",3.8,0)
3.8
"BLD",1533,"KRN",9.2,0)
9.2
"BLD",1533,"KRN",9.8,0)
9.8
"BLD",1533,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",1533,"KRN",9.8,"NM",1,0)
XUMF654^^0^B20811218
"BLD",1533,"KRN",9.8,"NM",2,0)
XUMF654P^^0^B68896964
"BLD",1533,"KRN",9.8,"NM",3,0)
XUMF5I^^0^B99383408
"BLD",1533,"KRN",9.8,"NM",4,0)
XUMF5II^^0^B14398872
"BLD",1533,"KRN",9.8,"NM","B","XUMF5I",3)

"BLD",1533,"KRN",9.8,"NM","B","XUMF5II",4)

"BLD",1533,"KRN",9.8,"NM","B","XUMF654",1)

"BLD",1533,"KRN",9.8,"NM","B","XUMF654P",2)

"BLD",1533,"KRN",19,0)
19
"BLD",1533,"KRN",19.1,0)
19.1
"BLD",1533,"KRN",101,0)
101
"BLD",1533,"KRN",409.61,0)
409.61
"BLD",1533,"KRN",771,0)
771
"BLD",1533,"KRN",779.2,0)
779.2
"BLD",1533,"KRN",870,0)
870
"BLD",1533,"KRN",8989.51,0)
8989.51
"BLD",1533,"KRN",8989.52,0)
8989.52
"BLD",1533,"KRN",8993,0)
8993
"BLD",1533,"KRN",8994,0)
8994
"BLD",1533,"KRN",9002226,0)
9002226
"BLD",1533,"KRN","B",.4,.4)

"BLD",1533,"KRN","B",.401,.401)

"BLD",1533,"KRN","B",.402,.402)

"BLD",1533,"KRN","B",.403,.403)

"BLD",1533,"KRN","B",.5,.5)

"BLD",1533,"KRN","B",.84,.84)

"BLD",1533,"KRN","B",3.6,3.6)

"BLD",1533,"KRN","B",3.8,3.8)

"BLD",1533,"KRN","B",9.2,9.2)

"BLD",1533,"KRN","B",9.8,9.8)

"BLD",1533,"KRN","B",19,19)

"BLD",1533,"KRN","B",19.1,19.1)

"BLD",1533,"KRN","B",101,101)

"BLD",1533,"KRN","B",409.61,409.61)

"BLD",1533,"KRN","B",771,771)

"BLD",1533,"KRN","B",779.2,779.2)

"BLD",1533,"KRN","B",870,870)

"BLD",1533,"KRN","B",8989.51,8989.51)

"BLD",1533,"KRN","B",8989.52,8989.52)

"BLD",1533,"KRN","B",8993,8993)

"BLD",1533,"KRN","B",8994,8994)

"BLD",1533,"KRN","B",9002226,9002226)

"BLD",1533,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",1533,"QUES",0)
^9.62^^
"BLD",1533,"REQB",0)
^9.611^^
"FIA",4.005)
MD5 Signature
"FIA",4.005,0)
^DIC(4.005,
"FIA",4.005,0,0)
4.005
"FIA",4.005,0,1)
y^n^p^^^^n^^n
"FIA",4.005,0,10)

"FIA",4.005,0,11)

"FIA",4.005,0,"RLRO")

"FIA",4.005,0,"VR")
8.0^XU
"FIA",4.005,4.005)
1
"FIA",4.005,4.005,1)

"FIA",4.005,4.0051)
0
"FIA",4.005,4.00511)
0
"INIT")
POST^XUMF654P
"IX",4.005,4.005,"AC",0)
4.005^AC^Sequence for XUMF5I routine^R^^R^IR^W^4.00511^^^^^S
"IX",4.005,4.005,"AC",1)
S ^DIC(4.005,"AC",X(1),$E(X(2),1,5),DA(2),DA(1),DA)=""
"IX",4.005,4.005,"AC",2)
K ^DIC(4.005,"AC",X(1),$E(X(2),1,5),DA(2),DA(1),DA)
"IX",4.005,4.005,"AC",2.5)
K ^DIC(4.005,"AC")
"IX",4.005,4.005,"AC",11.1,0)
^.114IA^2^2
"IX",4.005,4.005,"AC",11.1,1,0)
1^C^^^^1
"IX",4.005,4.005,"AC",11.1,1,1.5)
S X=DA(2)
"IX",4.005,4.005,"AC",11.1,2,0)
2^F^4.00511^1^5^2^F
"IX",4.005,4.005,"AC",11.1,2,3)

"MBREQ")
0
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3090706^3090706^6
"PKG",3,22,1,"PAH",1,0)
654^3150407^82
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3150407
"PKG",3,22,1,"PAH",1,1,1,0)
Kernel patch XU*8*654. This patch supports MFS. Please refer to the
"PKG",3,22,1,"PAH",1,1,2,0)
description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","XUMF5I")
0^3^B99383408
"RTN","XUMF5I",1,0)
XUMF5I ;ISS/PAVEL - XUMF5 MD5 Hash Entry point ;02/26/2015
"RTN","XUMF5I",2,0)
 ;;8.0;KERNEL;**383,407,502,654**;July 10, 1995;Build 29
"RTN","XUMF5I",3,0)
 ;
"RTN","XUMF5I",4,0)
 ;MD5 based on info from 4.005 SORT BY VUID or USER DEFINED SORTING
"RTN","XUMF5I",5,0)
 ;
"RTN","XUMF5I",6,0)
 Q
"RTN","XUMF5I",7,0)
EN(X0,MODE,IENCOUNT)  ;entry point to get MD5 algorithm
"RTN","XUMF5I",8,0)
 ; Lookup uses AMASTERVUID for files and B x-ref for subfiles....
"RTN","XUMF5I",9,0)
 ;
"RTN","XUMF5I",10,0)
 ; X0 = IEN or name of entry from 4.005 file
"RTN","XUMF5I",11,0)
 ; MODE = 0 regular mode.. last HASH value returned in Apl. ACK.
"RTN","XUMF5I",12,0)
 ;        1 debugging mode.. all values + hash codess returned in Apl ACK
"RTN","XUMF5I",13,0)
 ;        1.1 debugging mode.. all values (no hash codes) returned in Apl ACK
"RTN","XUMF5I",14,0)
 ;        2 debugging mode.. all fields values, all hash values, all hash codes returned in Apl. ACK.
"RTN","XUMF5I",15,0)
 ; IENCOUNT  = maximum entries for MD5 hash.. if NULL.. all entries counted...        
"RTN","XUMF5I",16,0)
 ; FILTER = value of filter field defined in file 4.005, field 8. Passed in by HL7 message (X0).
"RTN","XUMF5I",17,0)
 ;
"RTN","XUMF5I",18,0)
 ; TMP(sequence, def entry IEN, file/subfile #, field #)=""
"RTN","XUMF5I",19,0)
 ; TMP1(,"1,120.82,2,",2)="INTERNAL"
"RTN","XUMF5I",20,0)
 ; TMP2(FILE #,FIELD #)=""  if internal value requested...
"RTN","XUMF5I",21,0)
 N X,Y,X1,X2,X3,X20,X201,X1NEW,X2NEW,X2OLD,X0NAME,XP,H,CNT,CNTT,CNHT,XMD5,XDATE,XXP
"RTN","XUMF5I",22,0)
 N DIC,ERR,ROOT,ROOTX,ROOTB,ROOTB0,POINTER,JUMP,START,TMP,TMP1,TMP2,TMP3,TMP4,TMP5,TMP6,TMP7,TMP8,FDA,VERSION
"RTN","XUMF5I",23,0)
 N SLEV,LEV,IENS,VAL,VALUE,SORT,SORT1,EXITMD5,FILTER,FILTER1,FILTER2,ACTFIL,SORTXREF,SORTACT,MAPFLG,VAR,VAR0,VAR1,VAR2,VAR3
"RTN","XUMF5I",24,0)
 N A,B,C,D,ABCD
"RTN","XUMF5I",25,0)
 S:X0["~" FILTER=$P(X0,"~",2),ACTFIL=$P(X0,"~",3),X0=$P(X0,"~",1) ;parse out file name/IEN and filter value if it exists
"RTN","XUMF5I",26,0)
 D INIT^XUMF5II S X1=0,VAR="",VAR0=0,MAPFLG=0
"RTN","XUMF5I",27,0)
 S VAR1=99.99,VAR2="99.991*",VAR3=99.991 ; fields for files other than Mappings
"RTN","XUMF5I",28,0)
 F  S VAR=$O(^DIC(4.005,"B",VAR)) Q:VAR=""  D
"RTN","XUMF5I",29,0)
 .I VAR="Mappings" S VAR0=0,VAR0=$O(^DIC(4.005,"B",VAR,VAR0))
"RTN","XUMF5I",30,0)
 .I VAR0=X0 S VAR1=.01,VAR2="3*",VAR3=3,MAPFLG=1 ; fields for Mapping file
"RTN","XUMF5I",31,0)
 S FILTER1=$$GET1^DIQ(4.005,X0,8)
"RTN","XUMF5I",32,0)
 S SORTXREF=$$GET1^DIQ(4.005,X0,7)
"RTN","XUMF5I",33,0)
2 F  S X1=$O(TMP(X1)) Q:'$$NEXTB1(LEV)!EXITMD5  S:'X1 X1=SLEV(LEV),X2OLD=0  S X2=$O(TMP(X1,X0,0)) Q:'X2  D
"RTN","XUMF5I",34,0)
 .S (XP,JUMP)=0,XXP=$O(TMP(X1,X0,X2,0))
"RTN","XUMF5I",35,0)
 .;************ File/subfile has changed ************
"RTN","XUMF5I",36,0)
 .D:X2'=X2OLD
"RTN","XUMF5I",37,0)
 ..;K ^TMP("UNIQUE",$J)
"RTN","XUMF5I",38,0)
 ..;
"RTN","XUMF5I",39,0)
 ..;************ File Level & Start ************
"RTN","XUMF5I",40,0)
 ..I $D(^DIC(X2)),START D  Q
"RTN","XUMF5I",41,0)
 ...S START=0,SLEV(1)=X1,X2OLD(1)=X2
"RTN","XUMF5I",42,0)
 ...K ROOT,ROOTB,ROOTB0,X02,X021,TMP1
"RTN","XUMF5I",43,0)
 ...S LEV=1,IENS=""
"RTN","XUMF5I",44,0)
 ...D GETONE(LEV,X2)
"RTN","XUMF5I",45,0)
 ..;
"RTN","XUMF5I",46,0)
 ..;************ Going Up ************
"RTN","XUMF5I",47,0)
 ..I $G(^DD(X2OLD,0,"UP"))=X2 D  Q
"RTN","XUMF5I",48,0)
 ...K ^TMP("UNIQUE",$J,X2OLD)
"RTN","XUMF5I",49,0)
 ...I $$NEXTB(LEV,X2OLD) S JUMP=2 Q
"RTN","XUMF5I",50,0)
 ...K ROOT(LEV),ROOTB(LEV),ROOTB0(LEV),X20(LEV),X201(LEV),TMP1(LEV),X2OLD(LEV)
"RTN","XUMF5I",51,0)
 ...S LEV=LEV-1,IENS=$P(IENS,",",$L(IENS,",")-LEV,9999),X2=X2OLD(LEV)
"RTN","XUMF5I",52,0)
 ..Q:JUMP
"RTN","XUMF5I",53,0)
 ..;
"RTN","XUMF5I",54,0)
 ..;************ Going DOWN ************
"RTN","XUMF5I",55,0)
 ..I $G(^DD(X2,0,"UP"))=X2OLD D  Q
"RTN","XUMF5I",56,0)
 ...S LEV=LEV+1,SLEV(LEV)=X1,X2OLD(LEV)=X2
"RTN","XUMF5I",57,0)
 ...D GETONE(LEV,X2)
"RTN","XUMF5I",58,0)
 ..;
"RTN","XUMF5I",59,0)
 ..;************ Same Level other multiple... ************
"RTN","XUMF5I",60,0)
 ..I $G(^DD(X2,0,"UP"))=$G(^DD(X2OLD,0,"UP")),+$G(^DD(X2OLD,0,"UP")),+$G(^DD(X2,0,"UP")) D  Q
"RTN","XUMF5I",61,0)
 ...I $$NEXTB(LEV,X2OLD) S JUMP=2 Q
"RTN","XUMF5I",62,0)
 ...K ROOT(LEV),ROOTB(LEV),ROOTB0(LEV),X20(LEV),X201(LEV),TMP1(LEV),X2OLD(LEV)
"RTN","XUMF5I",63,0)
 ...S IENS=$P(IENS,",",$L(IENS,",")-LEV+1,9999) ;B:'$L(IENS)
"RTN","XUMF5I",64,0)
 ...S SLEV(LEV)=X1
"RTN","XUMF5I",65,0)
 ...S X2OLD(LEV)=X2
"RTN","XUMF5I",66,0)
 ...;S X2=X2OLD
"RTN","XUMF5I",67,0)
 ...D GETONE(LEV,X2)
"RTN","XUMF5I",68,0)
 ..Q:JUMP
"RTN","XUMF5I",69,0)
 ..;
"RTN","XUMF5I",70,0)
 ..;************ New File not start... ************
"RTN","XUMF5I",71,0)
 ..I $D(^DIC(X2)) D  Q
"RTN","XUMF5I",72,0)
 ...S:'$D(X2NEW) X2NEW=X2,X1NEW=X1
"RTN","XUMF5I",73,0)
 ...I $$NEXTB(LEV,X2OLD(LEV)) S JUMP=2 Q
"RTN","XUMF5I",74,0)
 ...K ROOT(LEV),ROOTB(LEV),ROOTB0(LEV),X20(LEV),X201(LEV),TMP1(LEV),SLEV(LEV),X2OLD(LEV)
"RTN","XUMF5I",75,0)
 ...S IENS=$P(IENS,",",$L(IENS,",")-LEV+1,9999) ;B:'$L(IENS)
"RTN","XUMF5I",76,0)
 ...I LEV=1 S (X1,SLEV(1))=X1NEW,(X2,X2OLD(1))=X2NEW K X1NEW,X2NEW D GETONE(LEV,X2) Q  ;;;;;;;;GET TO THE BOTTOM LEVEL = 1 NOT ANY OTHRER'S B X-REF
"RTN","XUMF5I",77,0)
 ...S LEV=LEV-1,X1=SLEV(LEV)-1,X2=+$G(X2OLD(LEV-1)),XP=1
"RTN","XUMF5I",78,0)
 ..;
"RTN","XUMF5I",79,0)
 ..;************ Last sequence number ************
"RTN","XUMF5I",80,0)
 ..I X2OLD=0 D  Q
"RTN","XUMF5I",81,0)
21 ...I $$NEXTB(LEV,X2) S JUMP=2 Q
"RTN","XUMF5I",82,0)
 ...K ROOT(LEV),ROOTB(LEV),ROOTB0(LEV),X20(LEV),X201(LEV),TMP1(LEV),X2OLD(LEV)
"RTN","XUMF5I",83,0)
 ...Q:LEV=1
"RTN","XUMF5I",84,0)
 ...S LEV=LEV-1,IENS=$P(IENS,",",$L(IENS,",")-LEV,9999),X2=X2OLD(LEV) ;,X1=SLEV(LEV)-1,XP=1
"RTN","XUMF5I",85,0)
 ...G 21
"RTN","XUMF5I",86,0)
 ..Q
"RTN","XUMF5I",87,0)
 ..;
"RTN","XUMF5I",88,0)
 .S X2OLD=X2
"RTN","XUMF5I",89,0)
 .Q:JUMP
"RTN","XUMF5I",90,0)
 .;************ Get value & MD5 ************
"RTN","XUMF5I",91,0)
 .S X3=$O(TMP(X1+XP,X0,X2,0)) Q:'X3
"RTN","XUMF5I",92,0)
 .S VAL=$S($L(IENS):$G(TMP1(LEV,X2,IENS,X3)),1:"")
"RTN","XUMF5I",93,0)
 .Q:'$L(VAL)
"RTN","XUMF5I",94,0)
 .D:$O(TMP1(LEV,X2,IENS,X3,0))
"RTN","XUMF5I",95,0)
 ..N X4 S X4=0,VAL="" F  S X4=$O(TMP1(LEV,X2,IENS,X3,X4)) Q:'X4  S VAL=VAL_$G(TMP1(LEV,X2,IENS,X3,X4))
"RTN","XUMF5I",96,0)
 .;Filter out non-matching entries if a filter exists
"RTN","XUMF5I",97,0)
 .Q:'$$FILTER()
"RTN","XUMF5I",98,0)
 .;If value set as uniqueue and already exist dont take it into MD5
"RTN","XUMF5I",99,0)
 .Q:'$L(VAL)
"RTN","XUMF5I",100,0)
 .I $G(TMP5(X2,X3)) Q:$D(^TMP("UNIQUE",$J,X2,X3,VAL))  S ^TMP("UNIQUE",$J,X2,X3,VAL)=""
"RTN","XUMF5I",101,0)
 .D
"RTN","XUMF5I",102,0)
 ..N X,TMP,I
"RTN","XUMF5I",103,0)
 ..I X3=VAR1,$D(^DIC(X2)) S CNTT=CNTT+1 I $G(IENCOUNT),CNTT>IENCOUNT S EXITMD5=1,CNTT=CNTT-1 Q
"RTN","XUMF5I",104,0)
 ..D:MODE>1.99 SETACK("File #: "_X2_" Field #: "_X3_" Value: "_VAL_" IENS: "_IENS)
"RTN","XUMF5I",105,0)
 ..S CNT=$G(CNT)+1
"RTN","XUMF5I",106,0)
 ..S VALUE=VALUE_VAL
"RTN","XUMF5I",107,0)
211 ..Q:$L(VALUE)<65
"RTN","XUMF5I",108,0)
 ..S X=$E(VALUE,65,$L(VALUE)),VALUE=$E(VALUE,1,64)
"RTN","XUMF5I",109,0)
 ..D:MODE
"RTN","XUMF5I",110,0)
 ...D SETACK($S(MODE=1.1:"",1:"Value: ")_VALUE)
"RTN","XUMF5I",111,0)
 ...D:MODE'=1.1 SETACK("HASH:  "_$$MAIN^XUMF5BYT($$HEX^XUMF5AU($$MD5E^XUMF5AU(ABCD,VALUE,0,CNHT+1*64))))
"RTN","XUMF5I",112,0)
 ..S ABCD=$$MD5E^XUMF5AU(ABCD,VALUE,1)
"RTN","XUMF5I",113,0)
 ..S VALUE=X,CNHT=CNHT+1
"RTN","XUMF5I",114,0)
 ..G 211
"RTN","XUMF5I",115,0)
 .Q
"RTN","XUMF5I",116,0)
 G END^XUMF5II
"RTN","XUMF5I",117,0)
 Q
"RTN","XUMF5I",118,0)
GETONE(LEV,X2)     ;GET DATA
"RTN","XUMF5I",119,0)
 S ROOT(LEV)=$$ROOT^DILFD(X2,"1,"_IENS,,"ERR")
"RTN","XUMF5I",120,0)
 Q:'$L(ROOT(LEV))
"RTN","XUMF5I",121,0)
 I $D(ERR) D  Q
"RTN","XUMF5I",122,0)
 .S ERROR="1^MD5 ROOT retrieval error, File/Subfile #: "_X2_" IENS: 1,"_IENS,EXITMD5=1,JUMP=2
"RTN","XUMF5I",123,0)
 .D EM^XUMFX("file DIE call error message in RDT",.ERR)
"RTN","XUMF5I",124,0)
 .K ERR
"RTN","XUMF5I",125,0)
 I SORTXREF'="" S:'$D(@(ROOT(LEV)_""""_SORTXREF_""""_")")) SORTXREF=""
"RTN","XUMF5I",126,0)
 S ROOTX(LEV)=ROOT(LEV)_"X201(LEV))" ;FOR LOOKUP OF ENTRIES
"RTN","XUMF5I",127,0)
 S SORT1="",SORT="B" ; S:$D(^DIC(X2)) SORT="AMASTERVUID",SORT1="1,"
"RTN","XUMF5I",128,0)
 I $D(^DIC(X2)) D
"RTN","XUMF5I",129,0)
 .S SORT="AMASTERVUID",SORT1="1,"
"RTN","XUMF5I",130,0)
 .I (SORTXREF'="") S SORT1="",SORT=SORTXREF
"RTN","XUMF5I",131,0)
 S ROOTB(LEV)=ROOT(LEV)_""""_SORT_""",X20(LEV))"
"RTN","XUMF5I",132,0)
 S X20(LEV)="",ROOTB0(LEV)=ROOT(LEV)_""""_SORT_""",X20(LEV),"_SORT1_"X201(LEV))"
"RTN","XUMF5I",133,0)
 S:SORT="B" POINTER=$G(TMP7(X2,XXP)) ;Pointer = pointer to file #
"RTN","XUMF5I",134,0)
 I SORT="B",+POINTER D  ;Handle pointer type of subfile...
"RTN","XUMF5I",135,0)
 .N BB S POINTER=$E(POINTER,2,$L(POINTER))
"RTN","XUMF5I",136,0)
 .; ^TMP("PROOT",$J,Subfile #,IEN from up level,"Name sorted",IEN level)=""
"RTN","XUMF5I",137,0)
 .; ^TMP("PROOT",$J,Subfile #,IEN from up level,X20(LEV),X201(LEV))=""
"RTN","XUMF5I",138,0)
 .K ^TMP("PROOT",$J,X2)
"RTN","XUMF5I",139,0)
 .;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
"RTN","XUMF5I",140,0)
 .S X201(LEV)=0 F  S X201(LEV)=$O(@(ROOTX(LEV)))  Q:'X201(LEV)  D
"RTN","XUMF5I",141,0)
 ..I $G(TMP4(X2,XXP)) D  ; If  sort By VUID
"RTN","XUMF5I",142,0)
 ...S BB=$$GET1^DIQ(X2,X201(LEV)_","_IENS,XXP,"I")     ;BB=IEN of poited to field
"RTN","XUMF5I",143,0)
 ...S:BB BB=$$GET1^DIQ(TMP4(X2,XXP),BB_",",VAR1,"E")  ;BB=VUID
"RTN","XUMF5I",144,0)
 ..E  S BB=$$GET1^DIQ(X2,X201(LEV)_","_IENS,XXP,"E")   ; Else sort by .01    BB= .01
"RTN","XUMF5I",145,0)
 ..S:$L(BB) ^TMP("PROOT",$J,X2,BB,X201(LEV))=""
"RTN","XUMF5I",146,0)
 .;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
"RTN","XUMF5I",147,0)
 .S ROOTB(LEV)="^TMP(""PROOT"",$J,"_X2_",X20(LEV))"
"RTN","XUMF5I",148,0)
 .S ROOTB0(LEV)="^TMP(""PROOT"",$J,"_X2_",X20(LEV),X201(LEV))"
"RTN","XUMF5I",149,0)
 I SORT="B",LEV=2,X2=+$P(^DD(X2OLD(1),VAR3,0),U,2) D  ;Handle Effective Date/Status multiple... only last date taken to HASH... TERMSTATUS
"RTN","XUMF5I",150,0)
 .K ^TMP("PROOT",$J,X2)
"RTN","XUMF5I",151,0)
 .S X20(LEV)=$O(@(ROOTB(LEV)),-1) ;Get last date..
"RTN","XUMF5I",152,0)
 .Q:'$L(X20(LEV))  ;No Data in Effective Date Multiple.
"RTN","XUMF5I",153,0)
 .S X201(LEV)=0,X201(LEV)=+$O(@ROOTB0(LEV))
"RTN","XUMF5I",154,0)
 .Q:'X201(LEV)
"RTN","XUMF5I",155,0)
 .S ROOTB(LEV)="^TMP(""PROOT"",$J,"_X2_",X20(LEV))"
"RTN","XUMF5I",156,0)
 .S ROOTB0(LEV)="^TMP(""PROOT"",$J,"_X2_",X20(LEV),X201(LEV))"
"RTN","XUMF5I",157,0)
 .S ^TMP("PROOT",$J,X2,X20(LEV),X201(LEV))=""
"RTN","XUMF5I",158,0)
 S X20(LEV)=""
"RTN","XUMF5I",159,0)
 I SORTXREF'="" S X20(LEV)=0,X201(LEV)=0
"RTN","XUMF5I",160,0)
GET1 I SORTXREF="" S X20(LEV)=$O(@(ROOTB(LEV))) Q:'$L(X20(LEV))  S X201(LEV)=0,X201(LEV)=$O(@(ROOTB0(LEV)))
"RTN","XUMF5I",161,0)
 I SORTXREF'="" S TMP8=$Q(@(ROOTB0(LEV))),X20(LEV)=$P(TMP8,",",3),X201(LEV)=+$P(TMP8,",",4) Q:'$L(X20(LEV))
"RTN","XUMF5I",162,0)
 I (SORTXREF'=""),'$O(@(ROOTB0(LEV))),('$L($O(@(ROOTB(LEV))))),'$$ACTALL() S EXITMD5=1 Q
"RTN","XUMF5I",163,0)
 I $D(^DIC(X2)),'$$ACTIVE(X2,X201(LEV)_","_IENS) G GET1 ;If not active entry.. skip it..  
"RTN","XUMF5I",164,0)
 S IENS=X201(LEV)_","_IENS
"RTN","XUMF5I",165,0)
 Q:'X201(LEV)
"RTN","XUMF5I",166,0)
 D GETSIE(X2,IENS,LEV)
"RTN","XUMF5I",167,0)
 Q
"RTN","XUMF5I",168,0)
NEXTB(LEV,X2X)      ;Get next IEN from xref on current level.. if exist
"RTN","XUMF5I",169,0)
 ;Is there other entry at current level to be proceeded..  ?? get next "B" x-ref set old X2 = NEW X2 and go to loop
"RTN","XUMF5I",170,0)
 Q:'$D(X20(LEV)) 0
"RTN","XUMF5I",171,0)
N1 Q:'$L(X20(LEV)) 0
"RTN","XUMF5I",172,0)
 I LEV=1,'($O(@(ROOTB0(LEV)))!$L($O(@(ROOTB(LEV))))) S EXITMD5=1 Q 1
"RTN","XUMF5I",173,0)
 Q:'($O(@(ROOTB0(LEV)))!$L($O(@(ROOTB(LEV))))) 0
"RTN","XUMF5I",174,0)
 S:X201(LEV) X201(LEV)=$O(@(ROOTB0(LEV))) ;Try get new IEN fron B-xref
"RTN","XUMF5I",175,0)
 I 'X201(LEV) S X20(LEV)=$O(@(ROOTB(LEV))),X201(LEV)=0 S:$L(X20(LEV)) X201(LEV)=$O(@(ROOTB0(LEV)))
"RTN","XUMF5I",176,0)
 Q:'X201(LEV) 0
"RTN","XUMF5I",177,0)
 I $D(^DIC(X2X)),'$$ACTIVE(X2X,X201(LEV)_","_$P(IENS,",",2,99)) G N1 ;If not active entry.. skip it..
"RTN","XUMF5I",178,0)
 S $P(IENS,",",1)=X201(LEV)
"RTN","XUMF5I",179,0)
 S X2=X2X
"RTN","XUMF5I",180,0)
 D GETSIE(X2,IENS,LEV)
"RTN","XUMF5I",181,0)
 S X1=SLEV(LEV)-1,XP=1
"RTN","XUMF5I",182,0)
 Q 1
"RTN","XUMF5I",183,0)
NEXTB1(LEV)     ;See if some other entries in x-ref at any level exist...  no variable is set.
"RTN","XUMF5I",184,0)
 ;
"RTN","XUMF5I",185,0)
 Q:X1 1
"RTN","XUMF5I",186,0)
3 Q:LEV=0 0
"RTN","XUMF5I",187,0)
 I LEV>1,'$L($G(X20(LEV))) G 4
"RTN","XUMF5I",188,0)
 I LEV=1,'$L($G(X20(LEV))) Q 0
"RTN","XUMF5I",189,0)
 I LEV=1,'($O(@(ROOTB0(LEV)))!$L($O(@(ROOTB(LEV))))) Q 0
"RTN","XUMF5I",190,0)
 I LEV=1,'$$ACTALL() Q 0
"RTN","XUMF5I",191,0)
 I X201(LEV),$O(@(ROOTB0(LEV))) Q 1
"RTN","XUMF5I",192,0)
 Q:$L($O(@(ROOTB(LEV)))) 1
"RTN","XUMF5I",193,0)
 Q:LEV=1 0
"RTN","XUMF5I",194,0)
4 S LEV=LEV-1 G 3
"RTN","XUMF5I",195,0)
 Q
"RTN","XUMF5I",196,0)
SETACK(X,MODE)      ;SET APPL. Acknowledgment + WRIGHT ?? 
"RTN","XUMF5I",197,0)
 W X,!
"RTN","XUMF5I",198,0)
 S:$G(MODE) ^TMP("XUMF ERROR",$J,XMD5,$O(^TMP("XUMF ERROR",$J,XMD5,9999999999999),-1)+1)=X
"RTN","XUMF5I",199,0)
 Q
"RTN","XUMF5I",200,0)
UP(X) ;Upercase conversion    
"RTN","XUMF5I",201,0)
 Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","XUMF5I",202,0)
ACTIVE(FILE,IEN)        ;GET 1 = Active 0 = Inactive
"RTN","XUMF5I",203,0)
 I $G(ACTFIL) Q 1
"RTN","XUMF5I",204,0)
 N TMP,BB,X,X1,X2,XT,XX
"RTN","XUMF5I",205,0)
 D GETS^DIQ(FILE,IEN,VAR2,"I","TMP","ERR")
"RTN","XUMF5I",206,0)
 S (XT,XX)=0,X="TMP"
"RTN","XUMF5I",207,0)
 F  S X=$Q(@(X)) Q:'$L(X)  D
"RTN","XUMF5I",208,0)
 .S X1=$G(@(X)),X=$Q(@(X)),X2=$G(@(X)) S:X1>XT XT=X1,XX=+X2
"RTN","XUMF5I",209,0)
 .I MAPFLG=1 S X=$Q(@(X))
"RTN","XUMF5I",210,0)
 Q XX
"RTN","XUMF5I",211,0)
GETSIE(X2,IENS,LEV)     ;GET Internal/External values + replace pointed field .01 with VUID
"RTN","XUMF5I",212,0)
 K TMP1(LEV) D GETS^DIQ(X2,IENS,"*","","TMP1(LEV)")
"RTN","XUMF5I",213,0)
 ;D:$D(TMP2(X2))!$D(TMP4(X2)) ;remove p654
"RTN","XUMF5I",214,0)
 D:$D(TMP2(X2))!$D(TMP4(X2))!$D(TMP8(X2))
"RTN","XUMF5I",215,0)
 .N TMP3,I
"RTN","XUMF5I",216,0)
 .D GETS^DIQ(X2,IENS,"*","I","TMP3")
"RTN","XUMF5I",217,0)
 .S I="" F  S I=$O(TMP2(X2,I)) Q:'I  S:$D(TMP1(LEV,X2,IENS,I)) TMP1(LEV,X2,IENS,I)=TMP3(X2,IENS,I,"I")
"RTN","XUMF5I",218,0)
 .;+++++++++++++++ Replace pointed .01 field with VUID if indicate so in 4.005
"RTN","XUMF5I",219,0)
 .S I="" F  S I=$O(TMP4(X2,I)) Q:'I  S:$D(TMP1(LEV,X2,IENS,I)) TMP1(LEV,X2,IENS,I)=$$GET1^DIQ(TMP4(X2,I),TMP3(X2,IENS,I,"I")_",",VAR1)
"RTN","XUMF5I",220,0)
 .;+++++++++++++++ Process post action on field patch XU*8.0*654
"RTN","XUMF5I",221,0)
 .S I="" F  S I=$O(TMP8(X2,I)) Q:'I  X:$D(TMP1(LEV,X2,IENS,I)) TMP8(X2,I)
"RTN","XUMF5I",222,0)
 Q
"RTN","XUMF5I",223,0)
ACTALL() ;See if there is some active entry on the file....
"RTN","XUMF5I",224,0)
 I $G(SORTACT) Q 1
"RTN","XUMF5I",225,0)
 N X1,X2,ACT
"RTN","XUMF5I",226,0)
 S ACT=0,X1=X20(1),X2=X201(1)
"RTN","XUMF5I",227,0)
 S:X20(1) X20(1)=X20(1)-.01
"RTN","XUMF5I",228,0)
 I SORTXREF="" F  S X20(1)=$O(@(ROOTB(1))) Q:(X20(1)="")!ACT  F  S X201(1)=$O(@(ROOTB0(1))) Q:X201(1)=""  I $$ACTIVE(X2OLD(1),X201(1)) S ACT=1 Q
"RTN","XUMF5I",229,0)
 I SORTXREF'="" D
"RTN","XUMF5I",230,0)
 .S X20(1)=""
"RTN","XUMF5I",231,0)
 .F  S X20(1)=$O(@(ROOTB(1))) Q:(X20(1)="")!ACT  S X201(1)="" F  S X201(1)=$O(@(ROOTB0(1))) Q:X201(1)=""  I $$ACTIVE(X2OLD(1),X201(1)) S ACT=1,SORTACT=1 Q
"RTN","XUMF5I",232,0)
 S X20(1)=X1,X201(1)=X2
"RTN","XUMF5I",233,0)
 Q ACT
"RTN","XUMF5I",234,0)
FILTER() ;if filter value passed in via HL7 message, verify it matches file/field value
"RTN","XUMF5I",235,0)
 ; FILTER = VALUE IN HL7 MESSAGE
"RTN","XUMF5I",236,0)
 ; FILTER1 = FIELD NUMBER IN 4.005
"RTN","XUMF5I",237,0)
 ; FILTER2 = VALUE OF FIELD IN REFERENCED FILE
"RTN","XUMF5I",238,0)
 ; If reference file is "Mappings", resolve pointer of 757.33 field .02 to 757.32 field 5 and compare
"RTN","XUMF5I",239,0)
 I '$D(FILTER) Q 1
"RTN","XUMF5I",240,0)
 I MAPFLG D
"RTN","XUMF5I",241,0)
 .S FILTER2=$$GET1^DIQ(X2OLD(1),X201(1),FILTER1,"I")
"RTN","XUMF5I",242,0)
 .S FILTER2=$$GET1^DIQ(757.32,FILTER2,5)
"RTN","XUMF5I",243,0)
 I 'MAPFLG S FILTER2=$$GET1^DIQ(X2,X201(1),FILTER1)
"RTN","XUMF5I",244,0)
 I ($G(FILTER2)'=$G(FILTER)) Q 0
"RTN","XUMF5I",245,0)
 Q 1
"RTN","XUMF5II")
0^4^B14398872
"RTN","XUMF5II",1,0)
XUMF5II ;ISS/PAVEL - XUMF5 MD5 Hash Entry point ;02/02/2015
"RTN","XUMF5II",2,0)
 ;;8.0;KERNEL;**407,654**;July 10, 1995;Build 29
"RTN","XUMF5II",3,0)
 ;
"RTN","XUMF5II",4,0)
 ;MD5 based on info from 4.005 SORT BY VUID
"RTN","XUMF5II",5,0)
 ;
"RTN","XUMF5II",6,0)
 Q
"RTN","XUMF5II",7,0)
INIT ;
"RTN","XUMF5II",8,0)
 K ^TMP("PROOT",$J) ;ROOT of file in the case of pointer...
"RTN","XUMF5II",9,0)
 K ^TMP("UNIQUE",$J) ; Global of unique Values
"RTN","XUMF5II",10,0)
 N X1,X11,X2,X20,X22,X3,X10,X21
"RTN","XUMF5II",11,0)
 ;TMP5(sequence #)= 1  if unique value
"RTN","XUMF5II",12,0)
 S DIC=4.005,X=$S(X0:"`",1:"")_X0,DIC(0)="Z",U="^" D ^DIC
"RTN","XUMF5II",13,0)
 I Y=-1 S ERROR="1^Unknown entry of 4.005 File: "_X0 Q
"RTN","XUMF5II",14,0)
 S X0=+Y,X0NAME=$P(Y(0),U) S:'$G(MODE) MODE=+$P(Y(0),U,2) K TMP M TMP=@($$ROOT^DILFD(4.005,,0)_"""AC"",X0)")
"RTN","XUMF5II",15,0)
 ; Set TMP5 if pointer type of field
"RTN","XUMF5II",16,0)
 S X1=0,(X10,X20)=0 F  S X1=$O(TMP(X1)) Q:'X1  S X2=$O(TMP(X1,X0,0)) D
"RTN","XUMF5II",17,0)
 .S X3=$O(TMP(X1,X0,X2,0))
"RTN","XUMF5II",18,0)
 .S X11=$O(TMP(X1)),X21=$O(TMP(+X11,X0,0))
"RTN","XUMF5II",19,0)
 .I X20'=X2,X2'=X21,'$D(^DIC(X2)),$G(^DD(X2,0))'["EFFECTIVE DATE/TIME" S TMP6(X2,X3)=1
"RTN","XUMF5II",20,0)
 .S X20=X2
"RTN","XUMF5II",21,0)
 .S POINTER=$$POINTER(X2,X3)
"RTN","XUMF5II",22,0)
 .S:POINTER TMP7(X2,X3)=POINTER
"RTN","XUMF5II",23,0)
 D GETS^DIQ(4.005,X0_",","**","","TMP1")
"RTN","XUMF5II",24,0)
 S A="" F  S A=$O(TMP1(4.00511,A)) Q:'$L(A)  D
"RTN","XUMF5II",25,0)
 .N X1,X2
"RTN","XUMF5II",26,0)
 .S X1=$P(A,",",2),X2=$P(A,",",1)
"RTN","XUMF5II",27,0)
 .S:TMP1(4.00511,A,2)="INTERNAL" TMP2(X1,X2)=""
"RTN","XUMF5II",28,0)
 .;+++++++++++++++Set array of fields of pointer type VUID into TMP4 +++++++++++++++++++++++++
"RTN","XUMF5II",29,0)
 .;TMP1(4.00511,A,3) = File Number Of Pointed to Field for VUID sort
"RTN","XUMF5II",30,0)
 .S:TMP1(4.00511,A,3) TMP4(X1,X2)=TMP1(4.00511,A,3)
"RTN","XUMF5II",31,0)
 .;+++++++++++++++Set array of columns with Unique value into TMP5 +++++++++++++++++++++++++
"RTN","XUMF5II",32,0)
 .;TMP1(4.00511,A,4) = Unique value YES
"RTN","XUMF5II",33,0)
 .S:TMP1(4.00511,A,4)="YES" TMP5(X1,X2)=1
"RTN","XUMF5II",34,0)
 .;TMP1(4.00511,A,5) = Post processing logic XU*8.0*654 
"RTN","XUMF5II",35,0)
 .S X=$G(TMP1(4.00511,A,5)) S:$L(X) TMP8(X1,X2)=X ; XU*8.0*654
"RTN","XUMF5II",36,0)
 ;
"RTN","XUMF5II",37,0)
 ;MODE set from input parameter or from file.
"RTN","XUMF5II",38,0)
 S A=$C(1,35,69,103)
"RTN","XUMF5II",39,0)
 S B=$C(137,171,205,239)
"RTN","XUMF5II",40,0)
 S C=$C(254,220,186,152)
"RTN","XUMF5II",41,0)
 S D=$C(118,84,50,16)
"RTN","XUMF5II",42,0)
 S ABCD=A_B_C_D
"RTN","XUMF5II",43,0)
 S (CNT,CNTT,CNHT)=0
"RTN","XUMF5II",44,0)
 S VALUE=""
"RTN","XUMF5II",45,0)
 ;X1 = SEQUENCE
"RTN","XUMF5II",46,0)
 ;X2 = FILE/SUBFILE #
"RTN","XUMF5II",47,0)
 ;X3 = Field #
"RTN","XUMF5II",48,0)
 ;TMP(MD5 Sequence ,IEN of entry from 4.005 file , File/Subfile#,field#)=""
"RTN","XUMF5II",49,0)
 ;TMP1 = FILE # ALL ENTRIES
"RTN","XUMF5II",50,0)
 ;TMP2(file#, field #)=""  Set.. if INTERNAL value required
"RTN","XUMF5II",51,0)
 ;TMP4(file#, field #)=Subfile #   Set if SORT by VUID for subfile = file #
"RTN","XUMF5II",52,0)
 ;TMP5(file#, field #)= 1  if unique value requested
"RTN","XUMF5II",53,0)
 ;TMP6(file#, field #)= 1  if column mode.. it's not used yet...
"RTN","XUMF5II",54,0)
 ;TMP7(file#, field #)=file # of pointer type field
"RTN","XUMF5II",55,0)
 ;TMP8(file#, field #)= Postprocessing logic ; XU*8.0*654
"RTN","XUMF5II",56,0)
 S START=1,X1=0,LEV=0,X2OLD=0,XMD5=$O(^TMP("XUMF ERROR",$J,9999999999999),-1)+1,EXITMD5=0
"RTN","XUMF5II",57,0)
 Q
"RTN","XUMF5II",58,0)
END ;************ So get the final ABCD value... ************
"RTN","XUMF5II",59,0)
 S ABCD=$$MD5E^XUMF5AU(ABCD,VALUE,0,CNHT*64+$L(VALUE))
"RTN","XUMF5II",60,0)
 D:MODE
"RTN","XUMF5II",61,0)
 .W ! D SETACK^XUMF5I($S(MODE=1.1:"",1:"Last value: ")_VALUE)
"RTN","XUMF5II",62,0)
 .D SETACK^XUMF5I("LAST HASH:  "_$$MAIN^XUMF5BYT($$HEX^XUMF5AU(ABCD))) W !
"RTN","XUMF5II",63,0)
 .D SETACK^XUMF5I("Total number of Characters included in Hash : "_(CNHT*64+$L(VALUE)))
"RTN","XUMF5II",64,0)
 .D SETACK^XUMF5I("Length of last value: "_$L(VALUE))
"RTN","XUMF5II",65,0)
 .D SETACK^XUMF5I("Number of file entries: "_CNTT)
"RTN","XUMF5II",66,0)
 .D SETACK^XUMF5I("Number of hash entries: "_(CNHT+1))
"RTN","XUMF5II",67,0)
 .D SETACK^XUMF5I("Number of values: "_CNT)
"RTN","XUMF5II",68,0)
 .W !
"RTN","XUMF5II",69,0)
 ;************ Hex conversion + storage of the final ABCD value ************
"RTN","XUMF5II",70,0)
 S VALUE=$$MAIN^XUMF5BYT($$HEX^XUMF5AU(ABCD))
"RTN","XUMF5II",71,0)
 K FDA
"RTN","XUMF5II",72,0)
 S FDA(4.005,X0_",",4)=$$NOW^XLFDT
"RTN","XUMF5II",73,0)
 S FDA(4.005,X0_",",5)=VALUE
"RTN","XUMF5II",74,0)
 K ERR D FILE^DIE(,"FDA","ERR")
"RTN","XUMF5II",75,0)
 I $D(ERR) D
"RTN","XUMF5II",76,0)
 .S ERROR="1^MD5 Date updating error"
"RTN","XUMF5II",77,0)
 .D EM^XUMFX("file DIE call error message in RDT",.ERR)
"RTN","XUMF5II",78,0)
 .K ERR
"RTN","XUMF5II",79,0)
 D SETACK^XUMF5I("MD5 Signature Entry: "_X0NAME)
"RTN","XUMF5II",80,0)
 D SETACK^XUMF5I("Local Hash value: "_VALUE)
"RTN","XUMF5II",81,0)
 S ERROR=$G(ERROR)
"RTN","XUMF5II",82,0)
 S X1=$O(@($$ROOT^DILFD(4.009,,0,"ERR")_"0)"))_","
"RTN","XUMF5II",83,0)
 D GETS^DIQ(4.009,X1,"*",,"TMP3") S VERSION=$G(TMP3(4.009,X1,1))
"RTN","XUMF5II",84,0)
 S $P(ERROR,U,2)=$P(ERROR,U,2)_";CHECKSUM:"_VALUE_";VERSION:"_VERSION_";"
"RTN","XUMF5II",85,0)
 D SETACK^XUMF5I("ERROR variable: "_ERROR)
"RTN","XUMF5II",86,0)
 K ^TMP("PROOT",$J)
"RTN","XUMF5II",87,0)
 Q VALUE
"RTN","XUMF5II",88,0)
 Q
"RTN","XUMF5II",89,0)
POINTER(X2,XXP)     ;GET THE POINTER FILE #
"RTN","XUMF5II",90,0)
 N FTYPE,TT,I
"RTN","XUMF5II",91,0)
 S:'$G(XXP) XXP=.01
"RTN","XUMF5II",92,0)
 D FIELD^DID(X2,XXP,,"TYPE;POINTER","TT")
"RTN","XUMF5II",93,0)
 Q:$G(TT("TYPE"))'="POINTER" 0
"RTN","XUMF5II",94,0)
 Q:'$L($G(TT("POINTER"))) 0
"RTN","XUMF5II",95,0)
 S TT="1^"_TT("POINTER")
"RTN","XUMF5II",96,0)
 Q TT
"RTN","XUMF654")
0^1^B20811218
"RTN","XUMF654",1,0)
XUMF654 ;OIFO-BP/BATRAN - MFS parameters file ;03/25/2015
"RTN","XUMF654",2,0)
 ;;8.0;KERNEL;**654**;Jul 10, 1995;Build 29
"RTN","XUMF654",3,0)
 ;Per VHA Directive 10-92-142, this routine should not be modified
"RTN","XUMF654",4,0)
 Q
"RTN","XUMF654",5,0)
 ;-------------------------------------------------
"RTN","XUMF654",6,0)
ADD(IEN,DATA) ; ADD ZERO NODE
"RTN","XUMF654",7,0)
 N FDA,FDAIEN,XFIELD,XVALUE,XCOUNT,XDATA,XI,XDATA1
"RTN","XUMF654",8,0)
 S XDATA=$$STRIP^XLFSTR(DATA,"]")
"RTN","XUMF654",9,0)
 S XCOUNT=$L(DATA)-$L(XDATA)+1
"RTN","XUMF654",10,0)
 S FDAIEN(1)=IEN
"RTN","XUMF654",11,0)
 S FDA(4.001,"?+1,",.01)=IEN
"RTN","XUMF654",12,0)
 F XI=1:1:XCOUNT D
"RTN","XUMF654",13,0)
 . S XDATA1=$P(DATA,"]",XI),XFIELD=+$P(XDATA1,";",1),XVALUE=$P(XDATA1,";",2)
"RTN","XUMF654",14,0)
 . I XFIELD'>0 Q
"RTN","XUMF654",15,0)
 . S FDA(4.001,"?+1,",XFIELD)=XVALUE
"RTN","XUMF654",16,0)
 .Q
"RTN","XUMF654",17,0)
 D UPDATE^DIE("","FDA","FDAIEN","ERR")
"RTN","XUMF654",18,0)
 I $D(ERR) D
"RTN","XUMF654",19,0)
 .D EM("UPDATE PARAMETR error on file #"_IEN,.ERR)
"RTN","XUMF654",20,0)
 .K ERR
"RTN","XUMF654",21,0)
 Q
"RTN","XUMF654",22,0)
 ;----------------------------------------------
"RTN","XUMF654",23,0)
ADDMD5(XUNAME) ; ADD ZERO NODE
"RTN","XUMF654",24,0)
 N IENS1
"RTN","XUMF654",25,0)
 K FDA
"RTN","XUMF654",26,0)
 S FDA(4.005,"+1,",.01)=XUNAME
"RTN","XUMF654",27,0)
 ;S FDA(4.005,"+1,",6)=0
"RTN","XUMF654",28,0)
 D UPDATE^DIE("E","FDA",,"ERR")
"RTN","XUMF654",29,0)
 I $D(ERR) D
"RTN","XUMF654",30,0)
 .D EM("UPDATE MD5 error on file "_XUNAME,.ERR)
"RTN","XUMF654",31,0)
 .K ERR
"RTN","XUMF654",32,0)
 Q
"RTN","XUMF654",33,0)
 ;---------------------------------------------------
"RTN","XUMF654",34,0)
SCMD5(XUNAME,FILEN) ; ADD SECOND LEVEL
"RTN","XUMF654",35,0)
 N XUIEN,IENS,XC
"RTN","XUMF654",36,0)
 K FDA
"RTN","XUMF654",37,0)
 S XUIEN=$O(^DIC(4.005,"B",XUNAME,0))
"RTN","XUMF654",38,0)
 I XUIEN'>0 Q
"RTN","XUMF654",39,0)
 K FDA
"RTN","XUMF654",40,0)
 S IENS="?+1,"_XUIEN_","
"RTN","XUMF654",41,0)
 S FDA(4.0051,IENS,.01)=FILEN
"RTN","XUMF654",42,0)
 D UPDATE^DIE("E","FDA",,"ERR")
"RTN","XUMF654",43,0)
 I $D(ERR) D
"RTN","XUMF654",44,0)
 .D EM("UPDATE MD5 error on file "_XUNAME,.ERR)
"RTN","XUMF654",45,0)
 .K ERR
"RTN","XUMF654",46,0)
 Q
"RTN","XUMF654",47,0)
 ;--------------------------------------------------
"RTN","XUMF654",48,0)
SUBMD5(XUNAME,XDATA,FILEN,XIEN) ; ADD THIRD LEVEL
"RTN","XUMF654",49,0)
 N XUIEN,IENS,XC
"RTN","XUMF654",50,0)
 K FDA
"RTN","XUMF654",51,0)
 S XUIEN=$O(^DIC(4.005,"B",XUNAME,0))
"RTN","XUMF654",52,0)
 I XUIEN'>0 Q
"RTN","XUMF654",53,0)
 ;
"RTN","XUMF654",54,0)
 S XC=","
"RTN","XUMF654",55,0)
 S IENS="+1"_XC_FILEN_XC_XUIEN_XC
"RTN","XUMF654",56,0)
 S FDAIEN(1)=XIEN
"RTN","XUMF654",57,0)
 S FDA(4.00511,IENS,.01)=$P(XDATA,"^",1)
"RTN","XUMF654",58,0)
 S FDA(4.00511,IENS,1)=$P(XDATA,"^",2)
"RTN","XUMF654",59,0)
 S FDA(4.00511,IENS,2)=$P(XDATA,"^",3)
"RTN","XUMF654",60,0)
 S FDA(4.00511,IENS,3)=$P(XDATA,"^",4)
"RTN","XUMF654",61,0)
 S FDA(4.00511,IENS,4)=$P(XDATA,"^",5)
"RTN","XUMF654",62,0)
 S FDA(4.00511,IENS,5)=$P(XDATA,"^",6,7)
"RTN","XUMF654",63,0)
 D UPDATE^DIE("","FDA","FDAIEN","ERR")
"RTN","XUMF654",64,0)
 ;D UPDATE^DIE("E","FDA",,"ERR")
"RTN","XUMF654",65,0)
 I $D(ERR) D
"RTN","XUMF654",66,0)
 .D EM("UPDATE MD5 error on file "_XUNAME,.ERR)
"RTN","XUMF654",67,0)
 .K ERR
"RTN","XUMF654",68,0)
 Q
"RTN","XUMF654",69,0)
 ;---------------------------------------------
"RTN","XUMF654",70,0)
DEL(IEN) ; Delete entries
"RTN","XUMF654",71,0)
 N DIK,DA
"RTN","XUMF654",72,0)
 S DIK="^DIC(4.001,",DA=IEN D ^DIK
"RTN","XUMF654",73,0)
 Q
"RTN","XUMF654",74,0)
 ;
"RTN","XUMF654",75,0)
DELMD5(XUNAME) ; Delete entries
"RTN","XUMF654",76,0)
 N DIK,DA
"RTN","XUMF654",77,0)
 I $G(XUNAME)="" Q
"RTN","XUMF654",78,0)
 S DA=$O(^DIC(4.005,"B",XUNAME,0))
"RTN","XUMF654",79,0)
 I DA'>0 Q
"RTN","XUMF654",80,0)
 S DIK="^DIC(4.005," D ^DIK
"RTN","XUMF654",81,0)
 Q
"RTN","XUMF654",82,0)
 ;
"RTN","XUMF654",83,0)
 ;-----------------------------------------------
"RTN","XUMF654",84,0)
NODES(IEN,XDATA,XCOUNT) ; -- ADD SEQUENCES
"RTN","XUMF654",85,0)
 ;
"RTN","XUMF654",86,0)
 N DATA,I
"RTN","XUMF654",87,0)
 F I=1:1:XCOUNT D
"RTN","XUMF654",88,0)
 . S DATA=$T(@XDATA+I)
"RTN","XUMF654",89,0)
 . D ADD1(DATA,IEN)
"RTN","XUMF654",90,0)
 . Q
"RTN","XUMF654",91,0)
 Q
"RTN","XUMF654",92,0)
 ;----------------------------------------------
"RTN","XUMF654",93,0)
ADD1(DATA,IEN) ;add sub level - ADD SINGLE SEQUENCE
"RTN","XUMF654",94,0)
 N NODE,IENS
"RTN","XUMF654",95,0)
 K FDA
"RTN","XUMF654",96,0)
 S DATA=$P(DATA,";",2)
"RTN","XUMF654",97,0)
 S NODE=$P(DATA,"^",1)
"RTN","XUMF654",98,0)
 S DATA=$P(DATA,"^",2,99)
"RTN","XUMF654",99,0)
 S IENS="+"_NODE_","_IEN_","
"RTN","XUMF654",100,0)
 S FDA(4.011,IENS,.01)=$P(DATA,"^",1)
"RTN","XUMF654",101,0)
 S FDA(4.011,IENS,.02)=$P(DATA,"^",2)
"RTN","XUMF654",102,0)
 S FDA(4.011,IENS,.03)=$P(DATA,"^",3)
"RTN","XUMF654",103,0)
 S FDA(4.011,IENS,.04)=$P(DATA,"^",4)
"RTN","XUMF654",104,0)
 S FDA(4.011,IENS,.05)=$P(DATA,"^",5)
"RTN","XUMF654",105,0)
 S FDA(4.011,IENS,.06)=$P(DATA,"^",6)
"RTN","XUMF654",106,0)
 S FDA(4.011,IENS,.07)=$P(DATA,"^",7)
"RTN","XUMF654",107,0)
 S FDA(4.011,IENS,.08)=$P(DATA,"^",8)
"RTN","XUMF654",108,0)
 S FDA(4.011,IENS,.09)=$P(DATA,"^",9)
"RTN","XUMF654",109,0)
 S FDA(4.011,IENS,.11)=$P(DATA,"^",11)
"RTN","XUMF654",110,0)
 S FDA(4.011,IENS,.12)=$P(DATA,"^",12)
"RTN","XUMF654",111,0)
 S FDA(4.011,IENS,.13)=$P(DATA,"^",13)
"RTN","XUMF654",112,0)
 S FDA(4.011,IENS,.14)=$P(DATA,"^",14)
"RTN","XUMF654",113,0)
 S FDA(4.011,IENS,.15)=$P(DATA,"^",15)
"RTN","XUMF654",114,0)
 S FDA(4.011,IENS,.16)=$P(DATA,"^",16)
"RTN","XUMF654",115,0)
 D UPDATE^DIE("E","FDA",,"ERR")
"RTN","XUMF654",116,0)
 I $D(ERR) D
"RTN","XUMF654",117,0)
 .D EM("UPDATE PARAMETER error on file #"_IEN,.ERR)
"RTN","XUMF654",118,0)
 .K ERR
"RTN","XUMF654",119,0)
 Q
"RTN","XUMF654",120,0)
 ;------------------------------------------------
"RTN","XUMF654",121,0)
ADD2(XIEN1,XNAME,XCOUNT,XDATA) ; add sub-sub level
"RTN","XUMF654",122,0)
 N XC,IENS,ERR,XIEN2
"RTN","XUMF654",123,0)
 K FDA
"RTN","XUMF654",124,0)
 S XIEN2=+$O(^DIC(4.001,XIEN1,1,"B",XNAME,0))
"RTN","XUMF654",125,0)
 I XIEN2'>0 Q
"RTN","XUMF654",126,0)
 S XC=","
"RTN","XUMF654",127,0)
 S IENS="+"_XCOUNT_XC_XIEN2_XC_XIEN1_XC
"RTN","XUMF654",128,0)
 S FDA(4.111,IENS,.01)=$P(XDATA,"^",1) ; SUBFILE SEQUENCE
"RTN","XUMF654",129,0)
 S FDA(4.111,IENS,.02)=$P(XDATA,"^",2) ; SUBFILE COLUMN NAME
"RTN","XUMF654",130,0)
 S FDA(4.111,IENS,.03)=$P(XDATA,"^",3) ; SUBFILE FIELD NUMBER
"RTN","XUMF654",131,0)
 S FDA(4.111,IENS,.04)=$P(XDATA,"^",4) ; SUBFILE FIELD VUID
"RTN","XUMF654",132,0)
 S FDA(4.111,IENS,.05)=$P(XDATA,"^",5) ; SUBFILE FIELD TYPE
"RTN","XUMF654",133,0)
 D UPDATE^DIE("","FDA","FDAIEN","ERR")
"RTN","XUMF654",134,0)
 I $D(ERR) D
"RTN","XUMF654",135,0)
 .D EM("UPDATE PARAMETER error on file "_XNAME,.ERR)
"RTN","XUMF654",136,0)
 .K ERR
"RTN","XUMF654",137,0)
 Q
"RTN","XUMF654",138,0)
 ;------------------------------------------------
"RTN","XUMF654",139,0)
EM(ERROR,ERR,XMSUB) ; -- error message
"RTN","XUMF654",140,0)
 N X,XMTEXT,XMDUZ
"RTN","XUMF654",141,0)
 D MSG^DIALOG("AM",.X,80,,"ERR")
"RTN","XUMF654",142,0)
 S X(.1)="HL7 message ID: "_$G(HL("MID"))
"RTN","XUMF654",143,0)
 S X(.2)="",X(.3)=$G(ERROR),X(.4)=""
"RTN","XUMF654",144,0)
 S:$G(XMSUB)="" XMSUB="MFS ERROR"
"RTN","XUMF654",145,0)
 S:'$D(XMY("user12345@FORUM.DOMAIN")) XMY("G.XUMF ERROR@FORUM.DOMAIN")=""
"RTN","XUMF654",146,0)
 S XMDUZ=.5
"RTN","XUMF654",147,0)
 S XMTEXT="X("
"RTN","XUMF654",148,0)
 D ^XMD
"RTN","XUMF654",149,0)
 Q
"RTN","XUMF654",150,0)
 ;----------------------------------------------
"RTN","XUMF654",151,0)
DATA9904 ;9999999.04
"RTN","XUMF654",152,0)
 ;1^Term^.01^^^^^^^75^^^^^^1^
"RTN","XUMF654",153,0)
 ;2^VistA_MVX_Code^.02^^^^^^^3^^^^^^2^
"RTN","XUMF654",154,0)
 ;3^VistA_MVX_Notes^201^^^^^^^99^^^^^^3^
"RTN","XUMF654",155,0)
 ;4^vista_replaced_by^99.97^^^^^^^^^^^VUID^^4^
"RTN","XUMF654",156,0)
 ;5^Status^.02^^9999999.0499^^^^^^^^^^^5^
"RTN","XUMF654",157,0)
 ;6^VistA_Inactive_Flag^.03^^^^^^^1^^^^^^6^
"RTN","XUMF654",158,0)
 ;-------------------------------------------------
"RTN","XUMF654",159,0)
DATA ;9999999.14
"RTN","XUMF654",160,0)
 ;1^Term^.01^^^^^^^99^^^^^^1^
"RTN","XUMF654",161,0)
 ;2^VistA_Acronym^8802^^^^^^^20^^^^^^2^
"RTN","XUMF654",162,0)
 ;3^VistA_CDC_Full_Vaccine_Name^2^^^^^^^^^^^^^3^1
"RTN","XUMF654",163,0)
 ;4^VistA_CDC_Product_Name^.01^ST^9999999.145^^VistA_CDC_Product_Name^^^30^^^0^^^4^
"RTN","XUMF654",164,0)
 ;5^VistA_Combination_Immunization^.2^^^^^^^1^^^^^^5^
"RTN","XUMF654",165,0)
 ;6^VistA_Class^100^^^^^^^^^^^^^6^
"RTN","XUMF654",166,0)
 ;7^VistA_CVX_Mapping^.01^^9999999.143^^VistA_CVX_Mapping^^^^^^^^^7^
"RTN","XUMF654",167,0)
 ;8^VistA_CVX_Code^.03^^^^^^^3^^^^^^8^
"RTN","XUMF654",168,0)
 ;9^VistA_Inactive_Flag^.07^^^^^^^1^^^^^^9^
"RTN","XUMF654",169,0)
 ;10^VistA_Max_No_In_Series^.05^^^^^^^^^^^^^10^
"RTN","XUMF654",170,0)
 ;11^VistA_Mnemonic^8801^^^^^^^3^^^^^^11^
"RTN","XUMF654",171,0)
 ;12^VistA_Reading_Required^.51^^^^^^^1^^^^^^12^
"RTN","XUMF654",172,0)
 ;13^VistA_Selectable_For_Historic^8803^^^^^^^^^^^^^13^
"RTN","XUMF654",173,0)
 ;14^VistA_Synonym^.01^ST^9999999.141^^VistA_Synonym^^^30^^^0^^^14^
"RTN","XUMF654",174,0)
 ;15^vista_has_vis^.01^ST^9999999.144^^vista_has_vis^^^15^^^0^VUID^^15^
"RTN","XUMF654",175,0)
 ;16^vista_replaced_by^99.97^^^^^^^^^^^VUID^^16^
"RTN","XUMF654",176,0)
 ;17^Status^.02^^9999999.1499^^^^^^^^^^^17^
"RTN","XUMF654",177,0)
 ;------------------------------------------------
"RTN","XUMF654",178,0)
DATA9928 ;9999999.28
"RTN","XUMF654",179,0)
 ;1^Term^.01^^^^^^^30^^^^^^1^
"RTN","XUMF654",180,0)
 ;2^VistA_Class^100^^^^^^^^^^^^^2^
"RTN","XUMF654",181,0)
 ;3^VistA_Inactive_Flag^.03^^^^^^^1^^^^^^4^
"RTN","XUMF654",182,0)
 ;4^VistA_Mnemonic^8801^^^^^^^3^^^^^^5^
"RTN","XUMF654",183,0)
 ;5^VistA_Print_Name^1201^^^^^^^15^^^^^^6^
"RTN","XUMF654",184,0)
 ;6^VistA_Skin_Test_Code^.02^^^^^^^2^^^^^^7^
"RTN","XUMF654",185,0)
 ;7^VistA_Skin_Test_Mapping^.01^ST^9999999.283^^VistA_Skin_Test_Mapping^^^30^^^^^^8^
"RTN","XUMF654",186,0)
 ;8^vista_replaced_by^99.97^^^^^^^^^^^VUID^^9^
"RTN","XUMF654",187,0)
 ;9^Status^.02^^9999999.2899^^^^^^^^^^^10^
"RTN","XUMF654",188,0)
 ;-------------------------------------------------
"RTN","XUMF654",189,0)
DATA920 ;920
"RTN","XUMF654",190,0)
 ;1^Term^.01^^^^^^^50^^^^^^1^
"RTN","XUMF654",191,0)
 ;2^VistA_VIS_Bar_Code^100^^^^^^^24^^^^^^2^
"RTN","XUMF654",192,0)
 ;3^VistA_VIS_Edition_Date^.02^^^^^^^^^^^^^3^
"RTN","XUMF654",193,0)
 ;4^VistA_VIS_Edition_Status^.03^^^^^^^^^^^^^4^
"RTN","XUMF654",194,0)
 ;5^VistA_VIS_Language^.04^^^^^^^^^^^^^5^
"RTN","XUMF654",195,0)
 ;6^VistA_VIS_URL^101^^^^^^^99^^^^^^6^
"RTN","XUMF654",196,0)
 ;7^vista_replaced_by^99.97^^^^^^^^^^^VUID^^7^
"RTN","XUMF654",197,0)
 ;8^Status^.02^^920.99^^^^^^^^^^^8^
"RTN","XUMF654",198,0)
 ;-------------------------------------------------
"RTN","XUMF654",199,0)
DATA9201 ;920.1
"RTN","XUMF654",200,0)
 ;1^Term^.01^^^^^^^60^^^^^^1^
"RTN","XUMF654",201,0)
 ;2^VistA_HL7_Code^.02^^^^^^^2^^^^^^2^
"RTN","XUMF654",202,0)
 ;3^vista_replaced_by^99.97^^^^^^^^^^^VUID^^3^
"RTN","XUMF654",203,0)
 ;4^Status^.02^^920.199^^^^^^^^^^^4^
"RTN","XUMF654",204,0)
 ;5^VistA_Inactive_Flag^.03^^^^^^^1^^^^^^5^
"RTN","XUMF654",205,0)
 ;-------------------------------------------------
"RTN","XUMF654",206,0)
DATA9202 ;920.2
"RTN","XUMF654",207,0)
 ;1^Term^.01^^^^^^^30^^^^^^1^
"RTN","XUMF654",208,0)
 ;2^VistA_FDA_NCIT_Code^.03^^^^^^^6^^^^^^2^
"RTN","XUMF654",209,0)
 ;3^VistA_HL7_Code^.02^^^^^^^3^^^^^^3^
"RTN","XUMF654",210,0)
 ;4^VistA_Textual_Definition^.04^^^^^^^90^^^^^^4^
"RTN","XUMF654",211,0)
 ;5^vista_replaced_by^99.97^^^^^^^^^^^VUID^^5^
"RTN","XUMF654",212,0)
 ;6^Status^.02^^920.299^^^^^^^^^^^6^
"RTN","XUMF654",213,0)
 ;-------------------------------------------------
"RTN","XUMF654",214,0)
DATA9203 ;920.3
"RTN","XUMF654",215,0)
 ;1^Term^.01^^^^^^^30^^^^^^1^
"RTN","XUMF654",216,0)
 ;2^VistA_HL7_Code^.02^^^^^^^4^^^^^^2^
"RTN","XUMF654",217,0)
 ;3^vista_replaced_by^99.97^^^^^^^^^^^VUID^^3^
"RTN","XUMF654",218,0)
 ;4^Status^.02^^920.399^^^^^^^^^^^4^
"RTN","XUMF654",219,0)
 ;----------------------------------------------
"RTN","XUMF654",220,0)
DATA9204 ;920.4
"RTN","XUMF654",221,0)
 ;1^Term^.01^^^^^^^30^^^^^^1^
"RTN","XUMF654",222,0)
 ;2^VistA_CDC_Code^.04^^^^^^^2^^^^^^2^
"RTN","XUMF654",223,0)
 ;3^VistA_HL7_Code^.02^^^^^^^10^^^^^^3^
"RTN","XUMF654",224,0)
 ;4^VistA_HL7_Code_Set^.05^^^^^^^10^^^^^^4^
"RTN","XUMF654",225,0)
 ;5^VistA_Inactive_Flag^.03^^^^^^^1^^^^^^5^
"RTN","XUMF654",226,0)
 ;6^VistA_Long_Name^1^^^^^^^99^^^^^^6^
"RTN","XUMF654",227,0)
 ;7^VistA_Textual_Definition^2^^^^^^^99^^^^^^7^
"RTN","XUMF654",228,0)
 ;8^vista_replaced_by^99.97^^^^^^^^^^^VUID^^8^
"RTN","XUMF654",229,0)
 ;9^Status^.02^^920.499^^^^^^^^^^^9^
"RTN","XUMF654",230,0)
 ;10^VistA_Precaution^.06^ST^^^^^^1^^^^^^10^
"RTN","XUMF654",231,0)
 ;11^vista_applies_to^.01^ST^920.43^^vista_applies_to^^^15^^^0^VUID^^11^
"RTN","XUMF654",232,0)
 ;---------------------------------------------
"RTN","XUMF654",233,0)
DATA9205 ;920.5
"RTN","XUMF654",234,0)
 ;1^Term^.01^^^^^^^30^^^^^^1^
"RTN","XUMF654",235,0)
 ;2^VistA_HL7_Code^.02^^^^^^^2^^^^^^2^
"RTN","XUMF654",236,0)
 ;3^vista_replaced_by^99.97^^^^^^^^^^^VUID^^3^
"RTN","XUMF654",237,0)
 ;4^Status^.02^^920.599^^^^^^^^^^^4^
"RTN","XUMF654",238,0)
 ;---------------------------------------------
"RTN","XUMF654P")
0^2^B68896964
"RTN","XUMF654P",1,0)
XUMF654P ;OIFO-BP/BATRAN - MFS parameters file ;04/02/2015
"RTN","XUMF654P",2,0)
 ;;8.0;KERNEL;**654**;Jul 10, 1995;Build 29
"RTN","XUMF654P",3,0)
 ;Per VHA Directive 10-92-142, this routine should not be modified
"RTN","XUMF654P",4,0)
 Q
"RTN","XUMF654P",5,0)
 ;----------------------------------------------
"RTN","XUMF654P",6,0)
POST ; -- Entry point
"RTN","XUMF654P",7,0)
 N XUMF S XUMF=1
"RTN","XUMF654P",8,0)
 D 9904,9914,9928 ; 
"RTN","XUMF654P",9,0)
 D 920,9201,9202,9203,9204,9205 ; 
"RTN","XUMF654P",10,0)
 N X S X="XUMF654" X ^%ZOSF("DEL")
"RTN","XUMF654P",11,0)
 K XMY
"RTN","XUMF654P",12,0)
 Q
"RTN","XUMF654P",13,0)
 ;----------------------------------------------
"RTN","XUMF654P",14,0)
9904 ; FILE 9999999.04
"RTN","XUMF654P",15,0)
 N XFIEN,XFILE
"RTN","XUMF654P",16,0)
 S XFIEN=9999999.04
"RTN","XUMF654P",17,0)
 S XFILE="Imm Manufacturers"
"RTN","XUMF654P",18,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",19,0)
 D ADD^XUMF654(XFIEN,".03;Imm Manufacturers].07;Imm Manufacturers]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",20,0)
 D NODES^XUMF654(XFIEN,"DATA9904",6) ; call ADD1 to add sub_entry
"RTN","XUMF654P",21,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",22,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",23,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",24,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",25,0)
 D SUBMD5^XUMF654(XFILE,".02^30^^^",XFIEN,.02)
"RTN","XUMF654P",26,0)
 D SUBMD5^XUMF654(XFILE,"99.97^50^^9999999.04^",XFIEN,99.97)
"RTN","XUMF654P",27,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",28,0)
 D SUBMD5^XUMF654(XFILE,"201^40^^^",XFIEN,201)
"RTN","XUMF654P",29,0)
 D SUBMD5^XUMF654(XFILE,".03^25^I^^",XFIEN,.03)
"RTN","XUMF654P",30,0)
 Q
"RTN","XUMF654P",31,0)
 ;-----------------------------------------------
"RTN","XUMF654P",32,0)
9914 ; FILE 9999999.14
"RTN","XUMF654P",33,0)
 N XFIEN,XFILE
"RTN","XUMF654P",34,0)
 S XFIEN=9999999.14
"RTN","XUMF654P",35,0)
 S XFILE="Imm Procedures"
"RTN","XUMF654P",36,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",37,0)
 D ADD^XUMF654(XFIEN,".03;Imm Procedures].07;Imm Procedures]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",38,0)
 D NODES^XUMF654(XFIEN,"DATA",17) ; call ADD1 to add sub_entry
"RTN","XUMF654P",39,0)
 D ADD2^XUMF654(XFIEN,"VistA_Synonym",1,"1^VistA_Synonym^.01^^")
"RTN","XUMF654P",40,0)
 D ADD2^XUMF654(XFIEN,"VistA_CVX_Mapping",1,"1^VistA_CVX_Mapping^.01^^")
"RTN","XUMF654P",41,0)
 D ADD2^XUMF654(XFIEN,"VistA_CDC_Product_Name",1,"1^VistA_CDC_Product_Name^.01^^")
"RTN","XUMF654P",42,0)
 D ADD2^XUMF654(XFIEN,"vista_has_vis",1,"1^vista_has_vis^.01^1^")
"RTN","XUMF654P",43,0)
 ;MD5
"RTN","XUMF654P",44,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",45,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",46,0)
 S XFIEN=9999999.14
"RTN","XUMF654P",47,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",48,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",49,0)
 D SUBMD5^XUMF654(XFILE,".03^80^^^",XFIEN,.03)
"RTN","XUMF654P",50,0)
 D SUBMD5^XUMF654(XFILE,".05^110^^^",XFIEN,.05)
"RTN","XUMF654P",51,0)
 D SUBMD5^XUMF654(XFILE,".07^100^I^^^D M9992803^PXVZRT",XFIEN,.07)
"RTN","XUMF654P",52,0)
 D SUBMD5^XUMF654(XFILE,".2^70^I^^^D M999142^PXVZRT",XFIEN,.2)
"RTN","XUMF654P",53,0)
 D SUBMD5^XUMF654(XFILE,".51^130^^^",XFIEN,.51)
"RTN","XUMF654P",54,0)
 D SUBMD5^XUMF654(XFILE,"2^40^^^",XFIEN,2)
"RTN","XUMF654P",55,0)
 D SUBMD5^XUMF654(XFILE,"10^150^^^",XFIEN,10)
"RTN","XUMF654P",56,0)
 D SUBMD5^XUMF654(XFILE,"99.97^170^^9999999.14^",XFIEN,99.97)
"RTN","XUMF654P",57,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",58,0)
 D SUBMD5^XUMF654(XFILE,"100^60^^^",XFIEN,100)
"RTN","XUMF654P",59,0)
 D SUBMD5^XUMF654(XFILE,"8801^120^^^",XFIEN,8801)
"RTN","XUMF654P",60,0)
 D SUBMD5^XUMF654(XFILE,"8802^30^^^",XFIEN,8802)
"RTN","XUMF654P",61,0)
 D SUBMD5^XUMF654(XFILE,"8803^140^^^",XFIEN,8803)
"RTN","XUMF654P",62,0)
 S XFIEN=9999999.143
"RTN","XUMF654P",63,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",64,0)
 D SUBMD5^XUMF654(XFILE,".01^90^^^^D M999143^PXVZRT",XFIEN,.01)
"RTN","XUMF654P",65,0)
 S XFIEN=9999999.144
"RTN","XUMF654P",66,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",67,0)
 D SUBMD5^XUMF654(XFILE,".01^160^^920^",XFIEN,.01)
"RTN","XUMF654P",68,0)
 S XFIEN=9999999.145
"RTN","XUMF654P",69,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",70,0)
 D SUBMD5^XUMF654(XFILE,".01^50^^^",XFIEN,.01)
"RTN","XUMF654P",71,0)
 Q
"RTN","XUMF654P",72,0)
 ;----------------------------------------------
"RTN","XUMF654P",73,0)
9928 ;FILE #9999999.28 - Skin Tests
"RTN","XUMF654P",74,0)
 N XFIEN,XFILE
"RTN","XUMF654P",75,0)
 S XFIEN=9999999.28
"RTN","XUMF654P",76,0)
 S XFILE="Skin Tests"
"RTN","XUMF654P",77,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",78,0)
 D ADD^XUMF654(XFIEN,".03;Skin Tests].07;Skin Tests]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",79,0)
 D NODES^XUMF654(XFIEN,"DATA9928",9) ; call ADD1 to add sub_entry
"RTN","XUMF654P",80,0)
 D ADD2^XUMF654(XFIEN,"VistA_Skin_Test_Mapping",1,"1^VistA_Skin_Test_Mapping^.01^^")
"RTN","XUMF654P",81,0)
 ;DM5
"RTN","XUMF654P",82,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",83,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",84,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",85,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",86,0)
 D SUBMD5^XUMF654(XFILE,".02^80^^^",XFIEN,.02)
"RTN","XUMF654P",87,0)
 D SUBMD5^XUMF654(XFILE,".03^50^I^^^D M9992803^PXVZRT",XFIEN,.03)
"RTN","XUMF654P",88,0)
 D SUBMD5^XUMF654(XFILE,"99.97^110^^9999999.28^",XFIEN,99.97)
"RTN","XUMF654P",89,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",90,0)
 D SUBMD5^XUMF654(XFILE,"100^30^^^",XFIEN,100)
"RTN","XUMF654P",91,0)
 D SUBMD5^XUMF654(XFILE,"1201^70^^^",XFIEN,1201)
"RTN","XUMF654P",92,0)
 D SUBMD5^XUMF654(XFILE,"8801^60^^^",XFIEN,8801)
"RTN","XUMF654P",93,0)
 S XFIEN=9999999.283
"RTN","XUMF654P",94,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",95,0)
 D SUBMD5^XUMF654(XFILE,".01^90^^^^D M999283^PXVZRT",XFIEN,.01)
"RTN","XUMF654P",96,0)
 Q
"RTN","XUMF654P",97,0)
 ;-----------------------------------------------
"RTN","XUMF654P",98,0)
920 ; FILE #920
"RTN","XUMF654P",99,0)
 N XFIEN,XFILE
"RTN","XUMF654P",100,0)
 S XFIEN=920
"RTN","XUMF654P",101,0)
 S XFILE="Imm VIS"
"RTN","XUMF654P",102,0)
 D DEL^XUMF654(XFIEN) ;delete entry
"RTN","XUMF654P",103,0)
 D ADD^XUMF654(XFIEN,".03;Imm VIS].07;Imm VIS]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",104,0)
 D NODES^XUMF654(XFIEN,"DATA920",8) ;call ADD1 to add sub_entry
"RTN","XUMF654P",105,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",106,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",107,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",108,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",109,0)
 D SUBMD5^XUMF654(XFILE,".02^40^I^^^D M92002^PXVZRT",XFIEN,.02)
"RTN","XUMF654P",110,0)
 D SUBMD5^XUMF654(XFILE,".03^70^^^^D M92003^PXVZRT",XFIEN,.03)
"RTN","XUMF654P",111,0)
 D SUBMD5^XUMF654(XFILE,".04^50^^^^D M92004^PXVZRT",XFIEN,.04)
"RTN","XUMF654P",112,0)
 D SUBMD5^XUMF654(XFILE,"99.97^90^^920^",XFIEN,99.97)
"RTN","XUMF654P",113,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",114,0)
 D SUBMD5^XUMF654(XFILE,"100^60^^^^",XFIEN,100)
"RTN","XUMF654P",115,0)
 D SUBMD5^XUMF654(XFILE,"101^80^^^",XFIEN,101)
"RTN","XUMF654P",116,0)
 Q
"RTN","XUMF654P",117,0)
 ;----------------------------------------------
"RTN","XUMF654P",118,0)
9201 ; FILE #920.1
"RTN","XUMF654P",119,0)
 N XFIEN,XFILE
"RTN","XUMF654P",120,0)
 S XFIEN=920.1
"RTN","XUMF654P",121,0)
 S XFILE="Imm Info Sources"
"RTN","XUMF654P",122,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",123,0)
 D ADD^XUMF654(XFIEN,".03;Imm Info Sources].07;Imm Info Sources]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",124,0)
 D NODES^XUMF654(XFIEN,"DATA9201",5) ; call ADD1 to add sub_entry
"RTN","XUMF654P",125,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",126,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",127,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",128,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",129,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",130,0)
 D SUBMD5^XUMF654(XFILE,".02^30^^^",XFIEN,.02)
"RTN","XUMF654P",131,0)
 D SUBMD5^XUMF654(XFILE,"99.97^40^^920.1^",XFIEN,99.97)
"RTN","XUMF654P",132,0)
 D SUBMD5^XUMF654(XFILE,".03^35^I^^",XFIEN,.03)
"RTN","XUMF654P",133,0)
 Q
"RTN","XUMF654P",134,0)
 ;-----------------------------------------------
"RTN","XUMF654P",135,0)
9202 ; FILE #920.2
"RTN","XUMF654P",136,0)
 N XFIEN,XFILE
"RTN","XUMF654P",137,0)
 S XFIEN=920.2
"RTN","XUMF654P",138,0)
 S XFILE="Imm Admin Routes"
"RTN","XUMF654P",139,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",140,0)
 D ADD^XUMF654(XFIEN,".03;Imm Admin Routes].07;Imm Admin Routes]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",141,0)
 D NODES^XUMF654(XFIEN,"DATA9202",6) ; call ADD1 to add sub_entry
"RTN","XUMF654P",142,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",143,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",144,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",145,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",146,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",147,0)
 D SUBMD5^XUMF654(XFILE,".03^30^^^",XFIEN,.03)
"RTN","XUMF654P",148,0)
 D SUBMD5^XUMF654(XFILE,".02^40^^^",XFIEN,.02)
"RTN","XUMF654P",149,0)
 D SUBMD5^XUMF654(XFILE,".04^50^^^",XFIEN,.04)
"RTN","XUMF654P",150,0)
 D SUBMD5^XUMF654(XFILE,"99.97^60^^920.2^",XFIEN,99.97)
"RTN","XUMF654P",151,0)
 Q
"RTN","XUMF654P",152,0)
 ;-----------------------------------------------
"RTN","XUMF654P",153,0)
9203 ; FILE 920.3
"RTN","XUMF654P",154,0)
 N XFIEN,XFILE
"RTN","XUMF654P",155,0)
 S XFIEN=920.3
"RTN","XUMF654P",156,0)
 S XFILE="Imm Body Sites"
"RTN","XUMF654P",157,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",158,0)
 D ADD^XUMF654(XFIEN,".03;Imm Body Sites].07;Imm Body Sites]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",159,0)
 D NODES^XUMF654(XFIEN,"DATA9203",4) ; call ADD1 to add sub_entry
"RTN","XUMF654P",160,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",161,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",162,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",163,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",164,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",165,0)
 D SUBMD5^XUMF654(XFILE,".02^30^^^",XFIEN,.02)
"RTN","XUMF654P",166,0)
 D SUBMD5^XUMF654(XFILE,"99.97^40^^920.3^",XFIEN,99.97)
"RTN","XUMF654P",167,0)
 Q
"RTN","XUMF654P",168,0)
 ;-----------------------------------------------
"RTN","XUMF654P",169,0)
9204 ; FILE 920.4
"RTN","XUMF654P",170,0)
 N XFIEN,XFILE
"RTN","XUMF654P",171,0)
 S XFIEN=920.4
"RTN","XUMF654P",172,0)
 S XFILE="Imm Contraindications"
"RTN","XUMF654P",173,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",174,0)
 D ADD^XUMF654(XFIEN,".03;Imm Contraindications].07;Imm Contraindications]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",175,0)
 D NODES^XUMF654(XFIEN,"DATA9204",11) ; call ADD1 to add sub_entry
"RTN","XUMF654P",176,0)
 D ADD2^XUMF654(XFIEN,"vista_applies_to",1,"1^vista_applies_to^.01^1^")
"RTN","XUMF654P",177,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",178,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",179,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",180,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",181,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",182,0)
 D SUBMD5^XUMF654(XFILE,".04^30^^^",XFIEN,.04)
"RTN","XUMF654P",183,0)
 D SUBMD5^XUMF654(XFILE,".02^40^^^",XFIEN,.02)
"RTN","XUMF654P",184,0)
 D SUBMD5^XUMF654(XFILE,".05^50^^^",XFIEN,.05)
"RTN","XUMF654P",185,0)
 D SUBMD5^XUMF654(XFILE,".03^60^I^^",XFIEN,.03)
"RTN","XUMF654P",186,0)
 D SUBMD5^XUMF654(XFILE,"1^70^^^",XFIEN,1)
"RTN","XUMF654P",187,0)
 D SUBMD5^XUMF654(XFILE,".06^75^I^^",XFIEN,.06)
"RTN","XUMF654P",188,0)
 D SUBMD5^XUMF654(XFILE,"2^80^^^",XFIEN,2)
"RTN","XUMF654P",189,0)
 D SUBMD5^XUMF654(XFILE,"99.97^90^^920.4^",XFIEN,99.97)
"RTN","XUMF654P",190,0)
 S XFIEN=920.43
"RTN","XUMF654P",191,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",192,0)
 D SUBMD5^XUMF654(XFILE,".01^85^^9999999.14^",XFIEN,.01)
"RTN","XUMF654P",193,0)
 Q
"RTN","XUMF654P",194,0)
 ;------------------------------------------------
"RTN","XUMF654P",195,0)
9205 ; FILE 920.5
"RTN","XUMF654P",196,0)
 N XFIEN,XFILE
"RTN","XUMF654P",197,0)
 S XFIEN=920.5
"RTN","XUMF654P",198,0)
 S XFILE="Imm Refusal Reasons"
"RTN","XUMF654P",199,0)
 D DEL^XUMF654(XFIEN) ; delete entry
"RTN","XUMF654P",200,0)
 D ADD^XUMF654(XFIEN,".03;Imm Refusal Reasons].07;Imm Refusal Reasons]5;D ZRT^PXVZRT]") ; add entry
"RTN","XUMF654P",201,0)
 D NODES^XUMF654(XFIEN,"DATA9205",4) ; call ADD1 to add sub_entry
"RTN","XUMF654P",202,0)
 D DELMD5^XUMF654(XFILE)
"RTN","XUMF654P",203,0)
 D ADDMD5^XUMF654(XFILE)
"RTN","XUMF654P",204,0)
 D SCMD5^XUMF654(XFILE,XFIEN)
"RTN","XUMF654P",205,0)
 D SUBMD5^XUMF654(XFILE,".01^20^^^",XFIEN,.01)
"RTN","XUMF654P",206,0)
 D SUBMD5^XUMF654(XFILE,".02^30^^^",XFIEN,.02)
"RTN","XUMF654P",207,0)
 D SUBMD5^XUMF654(XFILE,"99.97^40^^920.5^",XFIEN,99.97)
"RTN","XUMF654P",208,0)
 D SUBMD5^XUMF654(XFILE,"99.99^10^^^",XFIEN,99.99)
"RTN","XUMF654P",209,0)
 Q
"RTN","XUMF654P",210,0)
 ;-------------------------------------------------
"RTN","XUMF654P",211,0)
TEST ;
"RTN","XUMF654P",212,0)
 N XUMF,XMY S XUMF=1
"RTN","XUMF654P",213,0)
 S XMY("user12345@FORUM.DOMAIN")=""
"RTN","XUMF654P",214,0)
 D 9204,9904,9914,9928,920,9201,9202,9203,9204,9205 ;
"RTN","XUMF654P",215,0)
 Q
"UP",4.005,4.0051,-1)
4.005^1
"UP",4.005,4.0051,0)
4.0051
"UP",4.005,4.00511,-2)
4.005^1
"UP",4.005,4.00511,-1)
4.0051^1
"UP",4.005,4.00511,0)
4.00511
"VER")
8.0^22.0
"^DD",4.005,4.005,1,0)
FILE/SUBFILE NUMBER^4.0051^^1;0
"^DD",4.005,4.005,1,21,0)
^.001^2^2^3150220^^^^
"^DD",4.005,4.005,1,21,1,0)
This field is the Internal File Number (IFN) of the MD5 table supported 
"^DD",4.005,4.005,1,21,2,0)
by the Master File Server (MFS).
"^DD",4.005,4.0051,0)
FILE/SUBFILE NUMBER SUB-FIELD^^1^2
"^DD",4.005,4.0051,0,"DT")
3150130
"^DD",4.005,4.0051,0,"IX","B",4.0051,.01)

"^DD",4.005,4.0051,0,"NM","FILE/SUBFILE NUMBER")

"^DD",4.005,4.0051,0,"UP")
4.005
"^DD",4.005,4.0051,.01,0)
FILE/SUBFILE NUMBER^MFX^^0;1^K:$L(X)>15!($L(X)<1) X S:$D(X) DINUM=X
"^DD",4.005,4.0051,.01,.1)
File/Subfile Number
"^DD",4.005,4.0051,.01,1,0)
^.1
"^DD",4.005,4.0051,.01,1,1,0)
4.0051^B
"^DD",4.005,4.0051,.01,1,1,1)
S ^DIC(4.005,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",4.005,4.0051,.01,1,1,2)
K ^DIC(4.005,DA(1),1,"B",$E(X,1,30),DA)
"^DD",4.005,4.0051,.01,3)
Select file/subfile number to be included in MD5 procedure of the Master File Server (MFS) mechanism
"^DD",4.005,4.0051,.01,21,0)
^^2^2^3050818^
"^DD",4.005,4.0051,.01,21,1,0)
This field is the Internal File Number (IFN) of the MD5 table supported 
"^DD",4.005,4.0051,.01,21,2,0)
by the Master File Server (MFS).
"^DD",4.005,4.0051,.01,"DT")
3060517
"^DD",4.005,4.0051,1,0)
FIELD NUMBER^4.00511^^1;0
"^DD",4.005,4.0051,1,21,0)
^.001^2^2^3150220^^^^
"^DD",4.005,4.0051,1,21,1,0)
This is the field number of file/subfile to be included in MD5 procedure 
"^DD",4.005,4.0051,1,21,2,0)
of the Master File Server (MFS).
"^DD",4.005,4.00511,0)
FIELD NUMBER SUB-FIELD^^4^5
"^DD",4.005,4.00511,0,"DT")
3150130
"^DD",4.005,4.00511,0,"IX","B",4.00511,.01)

"^DD",4.005,4.00511,0,"NM","FIELD NUMBER")

"^DD",4.005,4.00511,0,"UP")
4.0051
"^DD",4.005,4.00511,.01,0)
FIELD NUMBER^MFX^^0;1^K:+X'=X!(X>999999)!(X<.001) X S:$D(X) DINUM=X
"^DD",4.005,4.00511,.01,1,0)
^.1
"^DD",4.005,4.00511,.01,1,1,0)
4.00511^B
"^DD",4.005,4.00511,.01,1,1,1)
S ^DIC(4.005,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",4.005,4.00511,.01,1,1,2)
K ^DIC(4.005,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",4.005,4.00511,.01,3)
Select field number of file/subfile to be included in MD5 procedure of the Master File Server (MFS).
"^DD",4.005,4.00511,.01,21,0)
^^2^2^3150130^
"^DD",4.005,4.00511,.01,21,1,0)
Number of file/subfile to be included in MD5 procedure of the Master File
"^DD",4.005,4.00511,.01,21,2,0)
Server (MFS).
"^DD",4.005,4.00511,.01,"DT")
3150130
"^DD",4.005,4.00511,1,0)
SEQUENCE^NJ5,0^^0;2^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",4.005,4.00511,1,3)
Type the sequence # the field will be taken in MD5 hash, a number between 1 and 99999.
"^DD",4.005,4.00511,1,21,0)
^.001^1^1^3150130^^^
"^DD",4.005,4.00511,1,21,1,0)
Order sequence, the field will be taken in MD5 hash.
"^DD",4.005,4.00511,1,"DT")
3150130
"^DD",4.005,4.00511,2,0)
External/Internal^SX^I:INTERNAL;E:EXTERNAL;^0;3^Q
"^DD",4.005,4.00511,2,3)
Enter the type of FileMan value to use, Internal or External.
"^DD",4.005,4.00511,2,21,0)
^.001^1^1^3150202^^
"^DD",4.005,4.00511,2,21,1,0)
Get External or internal Fileman value. Default = External
"^DD",4.005,4.00511,2,"DT")
3150130
"^DD",4.005,4.00511,3,0)
VUID FROM FILE^NJ21,8^^0;4^K:+X'=X!(X>999999999999)!(X<1)!(X?.E1"."9N.N) X
"^DD",4.005,4.00511,3,3)
Enter the number of the file being pointed to.  Type '@' and press Enter to clear this setting
"^DD",4.005,4.00511,3,21,0)
^^2^2^3060426^
"^DD",4.005,4.00511,3,21,1,0)
If Pointer type field to .01 (Name), replace Name with VUID of pointed 
"^DD",4.005,4.00511,3,21,2,0)
file. Field holds Pointed File #.
"^DD",4.005,4.00511,3,"DT")
3060426
"^DD",4.005,4.00511,4,0)
Distinct values^S^0:NO;1:YES;^0;5^Q
"^DD",4.005,4.00511,4,3)
Enter 1 for 'YES', if the field value must be unique, else enter 0 for 'NO'.
"^DD",4.005,4.00511,4,21,0)
^^3^3^3150202^
"^DD",4.005,4.00511,4,21,1,0)
If this field is set to 'YES' and the field value already exists, only 
"^DD",4.005,4.00511,4,21,2,0)
repeated value will be excluded from MD5, other record's fields will not 
"^DD",4.005,4.00511,4,21,3,0)
be affected.
"^DD",4.005,4.00511,4,"DT")
3150130
"^DD",4.005,4.00511,5,0)
POST-PROCESSING LOGIC^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",4.005,4.00511,5,3)
Enter Standard MUMPS code
"^DD",4.005,4.00511,5,9)
@
"^DD",4.005,4.00511,5,21,0)
^.001^2^2^3150129^^^
"^DD",4.005,4.00511,5,21,1,0)
This is Standard MUMPS code that gets executed for field exceptional 
"^DD",4.005,4.00511,5,21,2,0)
treatment.
**END**
**END**
